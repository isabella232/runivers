(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{119:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(){function t(){this._params={}}return t.prototype.get=function(t){return this.params()[t]},t.prototype.params=function(){var t={};return window.location.href.replace(/[?&]+(\w+)([^&]*)/gi,function(e,r){return t[r]=!0,""}),window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,r,n){return t[r]=decodeURIComponent(n),""}),this._params=t,t},t.prototype.set=function(t,e){if(e){var r=void 0,n=encodeURIComponent(e);r=this.get(t)?location.search.replace(new RegExp("([?|&]"+t+"=)(.+?)(&|$)"),"$1"+n+"$3"):location.search.length?location.search+"&"+t+"="+n:"?"+t+"="+n;var o={};o[t]=e,this._params[t]=e;var i={state:{url:r,params:o},url:r};return this._pushState(i),i}return this.remove(t)},t.prototype.remove=function(t){var e,r=location.search,n=r.split("?")[0],o=-1!==r.indexOf("?")?r.split("?")[1]:"";if(""!==o){for(var i=(e=o.split("&")).length-1;i>=0;i-=1)e[i].split("=")[0]===t&&e.splice(i,1);n=n+"?"+e.join("&")}delete this._params[t];var a={state:{url:n,type:"remove"},url:n};return this._pushState(a),a},t.prototype._pushState=function(t){history&&history.replaceState(t.state,document.title,t.url)},t}()},120:function(t,e,r){"use strict";var n=r(75),o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},a=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s={tms:"TILE"};function u(t){return new Promise(function(e,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status&&o.responseText)try{e(JSON.parse(o.responseText))}catch(t){r(t)}},o.open("GET",Object(n.b)(t),!0),o.send()})}function c(t,e){return void 0===e&&(e="https://qms.nextgis.com"),function(){function r(t,e){this.map=t,this.options=e,this.options.baseLayer=!0}return r.prototype.addLayer=function(r){return i(this,void 0,Promise,function(){var n,i,c,p;return a(this,function(a){switch(a.label){case 0:return this.qms||!r.qmsId?[3,2]:(n=this,[4,u(e+"/api/v1/geoservices/"+r.qmsId)]);case 1:n.qms=a.sent(),a.label=2;case 2:return(i=this.qms)&&(c=s[i.type||"tms"],(p=t.mapAdapter.layerAdapters[c])&&"TILE"===c)?(r=o({maxZoom:t.options.maxZoom,minZoom:t.options.minZoom},this.options,function(t){var e=("https:"===location.protocol?"https":"http")+"://";return{url:t.url.replace(/^(https?|ftp):\/\//,e),name:t.name,attribution:t.copyright_text,maxZoom:t.z_max,minZoom:t.z_min}}(i)),this.options=r,[2,new p(this.map,r).addLayer(r)]):[2]}})})},r}()}r.d(e,"a",function(){return l});var p=function(){return(p=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=function(){function t(t){this.options={url:"https://qms.nextgis.com"},this.options=p({},this.options,t),this.url=this.options.url}return t.prototype.getLayerAdapters=function(){var t=this;return Promise.resolve([{name:"QMS",createAdapter:function(e){return Promise.resolve(t._createAdapter(e))}}])},t.prototype._createAdapter=function(t){return c(t,this.url)},t.utils={createQmsAdapter:c},t}()},121:function(t,e,r){"use strict";var n=r(47);var o=/\{ *([\w_-]+) *\}/g;function i(t,e){return t.replace(o,function(t,r){var n=e[r];if(void 0===n)throw new Error("No value provided for letiable "+t);return"function"==typeof n&&(n=n(e)),n})}var a=r(24);r.d(e,"a",function(){return c});var s=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},u=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=function(){function t(t){this.options=t,this.emitter=new a.EventEmitter,this.routeStr="/api/component/pyramid/route",this._loadingQueue={},this._loadingStatus={},this.options.route&&(this.routeStr=this.options.route)}return t.prototype.setNextGisWeb=function(t){this.logout(),this.options.baseUrl=t},t.prototype.connect=function(){return s(this,void 0,n.a,function(){var t,e,r,n=this;return u(this,function(o){switch(o.label){case 0:return this.route?[2,Promise.resolve(this.route)]:[3,1];case 1:return this.options.auth?(t=this.options.auth,e=t.login,r=t.password,e&&r?[4,this.getUserInfo({login:e,password:r})]:[3,3]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.makeQuery(this.routeStr,{},{}).then(function(t){return n.route=t,t})];case 4:return[2,o.sent()]}})})},t.prototype.login=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){return this.logout(),[2,this.getUserInfo(t)]})})},t.prototype.logout=function(){this._rejectLoadingQueue(),this._loadingStatus={},this.options.auth=void 0,this.route=void 0,this.user=void 0,this.emitter.emit("logout")},t.prototype.getUserInfo=function(t){var e=this;t&&(this.options.auth=t);var r={headers:this.getAuthorizationHeaders(t)};return this.makeQuery("/api/component/auth/current_user",{},r).then(function(t){return e.user=t,e.emitter.emit("login",t),t}).catch(function(t){throw e.emitter.emit("login:error",t),t})},t.prototype.getAuthorizationHeaders=function(t){var e=this.makeClientId(t);if(e)return{Authorization:"Basic "+e}},t.prototype.makeClientId=function(t){if(t=t||this.options.auth){var e=t.login,r=t.password;return window.btoa(unescape(encodeURIComponent(e+":"+r)))}},t.prototype.request=function(t,e,r){return void 0===e&&(e={}),s(this,void 0,n.a,function(){var n,o,a,s,c,p,l,f;return u(this,function(u){switch(u.label){case 0:return[4,this.connect()];case 1:if(n=u.sent(),o=n&&n[t]){if(o=o.slice(),a=o.shift(),o.length){for(s={},c=0;c<o.length;c++)if(p=o[c],s[c]="{"+p+"}",void 0===e[p])throw new Error("`"+p+"` url api argument is not specified");a&&(a=i(a,s))}if(e){for(f in l=[],e)-1===o.indexOf(f)&&l.push(f+"="+e[f]);l.length&&(a=a+"?"+l.join("&"))}if(a)return[2,this.makeQuery(a,e,r)];throw new Error("request url is not set")}return[2]}})})},t.prototype.post=function(t,e,r){return(e=e||{}).method="POST",e.nocache=!0,this.request(t,r,e)},t.prototype.get=function(t,e,r){return(e=e||{}).method="GET",e.nocache=!0,this.request(t,r,e)},t.prototype.makeQuery=function(t,e,r){var o=this;if(void 0===r&&(r={}),t=(this.options.baseUrl?this.options.baseUrl:"")+t)return e&&(t=i(t,e)),t=t.replace(/([^:]\/)\/+/g,"$1"),!this._loadingStatus[t]||r.nocache?(this._loadingStatus[t]=!0,this._getJson(t,r).then(function(e){return o._loadingStatus[t]=!1,o._executeLoadingQueue(t,e),e}).catch(function(e){throw o._loadingStatus[t]=!1,o._executeLoadingQueue(t,e,!0),o.emitter.emit("error",e),e})):(this._loadingStatus[t]=!1,new n.a(function(e,r){o._setLoadingQueue(t,e,r)}));throw new Error("No `url` parameter set for option "+name)},t.prototype._setLoadingQueue=function(t,e,r){this._loadingQueue[t]=this._loadingQueue[t]||{name:t,waiting:[]},this._loadingQueue[t].waiting.push({resolve:e,reject:r,timestamp:new Date})},t.prototype._rejectLoadingQueue=function(){for(var t in this._loadingQueue){this._loadingQueue[t].waiting.forEach(function(t){t.reject()}),delete this._loadingQueue[t]}},t.prototype._executeLoadingQueue=function(t,e,r){var n=this._loadingQueue[t];if(n){for(var o=0;o<n.waiting.length;o++){var i=n.waiting[o];r?i.reject&&i.reject():i.resolve(e)}n.waiting=[]}},t.prototype._getJson=function(t,e){var r=this,o=[];return e.responseType=e.responseType||"json",new n.a(function(n,i){r.user&&((e=e||{}).headers=r.getAuthorizationHeaders()),function(t,e,r,n,o){void 0===r&&(r={}),r.method=r.method||"GET";var i=new XMLHttpRequest;i.open(r.method||"GET",t,!0),"blob"===r.responseType&&(i.responseType=r.responseType);var a=function(t){void 0===t&&(t=!1);var o=t?n:e;if("blob"===r.responseType)o(i.response);else if(i.responseText)try{o(JSON.parse(i.responseText))}catch(t){o(i.responseText)}else n({message:""})};i.onreadystatechange=function(){4===i.readyState&&200===i.status||3===i.readyState&&201===i.status?a():3===i.readyState&&400===i.status?a():4===i.readyState&&500===i.status?a():4===i.readyState&&401===i.status?n(i.statusText):4===i.readyState&&n("request error")},i.onerror=function(t){n(t)},i.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;r.onProgress&&r.onProgress(e)}};var s,u=r.headers;if(u)for(var c in u){var p=u[c];"string"==typeof p&&i.setRequestHeader(c,p)}if(void 0!==r.withCredentials&&(i.withCredentials=r.withCredentials),r.file){if((s=new FormData).append("file",r.file),r.data)for(var l in s)s.append(l,s[l])}else s=r.data?JSON.stringify(r.data):null;o&&o.push(function(){i.abort()}),i.send(s)}(t,n,e,i,o)},function(){o.forEach(function(t){return t()})})},t}()},163:function(t,e){},164:function(t,e){},165:function(t,e){},166:function(t,e){},167:function(t,e){},168:function(t,e){},169:function(t,e){},170:function(t,e){},171:function(t,e){},172:function(t,e){},173:function(t,e){},174:function(t,e){},175:function(t,e){},176:function(t,e){},177:function(t,e){},178:function(t,e){},182:function(t,e,r){"use strict";var n=r(120);r(172);e.default=n.a},183:function(t,e,r){"use strict";var n=r(119);r(173);e.default=n.a},188:function(t,e,r){"use strict";var n=r(121);r(47),r(174),r(175),r(176),r(177),r(178);e.default=n.a},200:function(t,e,r){"use strict";var n;try{n=r(426)}catch(t){}function o(t,e){var r=window.document.createElement("canvas"),o=r.getContext("2d");if(!o)throw new Error("failed to create canvas 2d context");return r.setAttribute("width",String(e.width)),r.setAttribute("height",String(e.height)),!n&&t instanceof HTMLImageElement?o.drawImage(t,0,0,e.width,e.height):"string"==typeof t&&n(r,t),o.getImageData(0,0,e.width,e.height)}var i=0,a=function(){function t(t,e){this.map=t,this.options=e,this._layerId="layer-"+i++}return t.prototype.addLayer=function(t){return[""]},t}(),s={circle:[["fillColor","color"],["fillOpacity","opacity"],["strokeColor","stroke-color"],["strokeOpacity","stroke-opacity"],["weight","stroke-width"],"radius"],line:[["strokeColor","color"],["strokeOpacity","opacity"],["weight","width"]],fill:[["fillColor","color"],["fillOpacity","opacity"]],icon:["color","opacity"].concat([])},u={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill",GeometryCollection:"fill"},c={circle:"Point",line:"LineString",fill:"Polygon",icon:"Point"},p={icon:["Point"]};for(var l in u){var f=u[l],h=p[f]||[];h.push(l),p[f]=h}function y(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=1+(e[t[r]]||0);var n="";for(var o in e){var i=n?e[n]:0;e[o]>i&&(n=o)}return n}function d(t,e){var r=p[e];return!!r&&-1!==r.indexOf(t)}var v,m=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g=function(){return(g=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},_=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},b=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},w={color:"blue",opacity:1,radius:10},L=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.map=e,n.options=r,n.selected=!1,n.featureIdName="id",n._types=["fill","circle","line"],n._selectedFeatureIds=[],n._sourceId="source-"+n._layerId,n._selectionName=n._layerId+"-highlighted",n.$onLayerClick=n._onLayerClick.bind(n),n}return m(e,t),e.prototype.addLayer=function(t){return _(this,void 0,Promise,function(){var e,r,n,o,i,a,s,u,p;return b(this,function(l){switch(l.label){case 0:if(t=this.options=g({},this.options,t||{}),this.layer=[],e=this._types=t.type?[t.type]:this._types,!t.paint)return[3,5];this._onAddLayer(this._sourceId),r=0,n=e,l.label=1;case 1:return r<n.length?(o=n[r],(i=c[o])?(a=o,"circle"===o&&"icon"===this._detectPaintType(t.paint)&&(a="icon"),s=this._getLayerNameFromType(o),u=["==","$type",i],[4,this._addLayer(s,a,u)]):[3,4]):[3,5];case 2:return l.sent(),this.layer.push(s),t.selectedPaint?(p=this._getSelectionLayerNameFromType(o),[4,this._addLayer(p,a,["all",u,["in",this.featureIdName,""]])]):[3,4];case 3:l.sent(),this.layer.push(p),l.label=4;case 4:return r++,[3,1];case 5:return this._addEventsListeners(),[2,this.layer]}})})},e.prototype.removeLayer=function(){var t=this.map;this.layer&&this.layer.forEach(function(e){t.removeLayer(e)})},e.prototype._onAddLayer=function(t,e){},e.prototype._updateLayerPaint=function(t){return _(this,void 0,void 0,function(){var e,r,n,o,i,a,s,u,c,p;return b(this,function(l){switch(l.label){case 0:if(e=this._getLayerNameFromType(t),!this.options.paint)return[3,6];r=[[e,this.options.paint]],this.options.selectedPaint&&(n=this._getSelectionLayerNameFromType(t),r.push([n,this.options.selectedPaint])),o=0,i=r,l.label=1;case 1:return o<i.length?(a=i[o],s=a[0],u=a[1],c=void 0,this.options.nativePaint?(c=u,[3,4]):[3,2]):[3,6];case 2:return[4,this._createPaintForType(u,t)];case 3:c=l.sent(),l.label=4;case 4:if("icon-image"in c)for(p in c["icon-allow-overlap"]=!0,c)this.map.setLayoutProperty(s,p,c[p]);else for(p in c)this.map.setPaintProperty(s,p,c[p]);l.label=5;case 5:return o++,[3,1];case 6:return[2]}})})},e.prototype._getLayerNameFromType=function(t){return t+"-"+this._layerId},e.prototype._getSelectionLayerNameFromType=function(t){return t+"-"+this._selectionName},e.prototype._createPaintForType=function(t,e,r){return _(this,void 0,Promise,function(){var r,n,o,i;return b(this,function(a){switch(a.label){case 0:return"function"==typeof t?[3,3]:(r={},n=g({},w,t||{}),"icon"===t.type&&t.html?[4,this._registerImage(t)]:[3,2]);case 1:return a.sent(),[2,{"icon-image":t.html}];case 2:for(i in o=function(t){var o=s[e];if(o){var i=o.find(function(e){return"string"==typeof e?e===t:!!Array.isArray(e)&&e[0]===t});if(i){var a=Array.isArray(i)?i[1]:i;r[e+"-"+a]=n[t]}}},n)o(i);return r[e+"-opacity-transition"]={duration:0},[2,r];case 3:return[2]}})})},e.prototype._getRendromId=function(t){return t.id},e.prototype._registerImage=function(t){return _(this,void 0,void 0,function(){var e,r,i;return b(this,function(a){switch(a.label){case 0:return t.html?this.map.hasImage(t.html)?[3,2]:(e=12,r=12,t.iconSize&&(e=t.iconSize[0],r=t.iconSize[1]),[4,(s=t.html,u={width:e,height:r},new Promise(function(t){if(n)t(o(s,u));else{var e=new Image;e.crossOrigin="Anonymous",e.src="data:image/svg+xml;base64,"+btoa(s),e.onload=function(){var r=o(e,u);t(r)}}}))]):[3,2];case 1:i=a.sent(),this.map.addImage(t.html,i),a.label=2;case 2:return[2]}var s,u})})},e.prototype._selectFeature=function(t){},e.prototype._unselectFeature=function(t){},e.prototype._getAdditionalLayerOptions=function(){return{}},e.prototype._addLayer=function(t,e,r){return _(this,void 0,void 0,function(){var n;return b(this,function(o){return n=g({id:t,type:"icon"===e?"symbol":e,source:this._sourceId,layout:{visibility:"none"},filter:r},this._getAdditionalLayerOptions()),this.map.addLayer(n),[2]})})},e.prototype._onLayerClick=function(t){t.preventDefault();var e=this.map.queryRenderedFeatures(t.point,{layers:this.layer})[0];if(e){var r=this._getRendromId(e);if(void 0!==r){var n=-1!==this._selectedFeatureIds.indexOf(r);n?this.options&&this.options.unselectOnSecondClick&&(this._unselectFeature(e),n=!1):(this._selectFeature(e),n=!0),this.options.onLayerClick&&this.options.onLayerClick({layer:this,feature:e,selected:n})}}},e.prototype._detectPaintType=function(t){if("type"in t)return t.type;if("function"==typeof t)try{var e=t({type:"Feature",properties:{},geometry:{}});return this._detectPaintType(e)}catch(t){}},e.prototype._addEventsListeners=function(){var t=this;this.layer&&this.options&&this.options.selectable&&this.layer.forEach(function(e){if(t.$onLayerClick){var r=t.$onLayerClick;t.map.on("click",e,function(t){r(t)})}t.map.on("mousemove",e,function(){t.map.getCanvas().style.cursor="pointer"}),t.map.on("mouseleave",e,function(){t.map.getCanvas().style.cursor=""})})},e}(a),C=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},k=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},A={gt:">",lt:"<",ge:">=",le:"<=",eq:"==",ne:"!=",in:"in",notin:"!in",like:"==",ilike:"=="},P={gt:A.le,lt:A.ge,ge:A.lt,le:A.gt,eq:A.ne,ne:A.eq,in:A.notin,notin:A.in,like:A.ne,ilike:A.ne},E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.select=function(t){"function"!=typeof t&&this._updateFilter(t),this.selected=!0},e.prototype.unselect=function(){this._updateFilter(),this.selected=!1},e.prototype.addLayer=function(e){return O(this,void 0,Promise,function(){var r;return k(this,function(n){switch(n.label){case 0:return[4,t.prototype.addLayer.call(this,e)];case 1:return r=n.sent(),this._updateLayerPaint(this.options.type||"fill"),[2,r]}})})},e.prototype._getAdditionalLayerOptions=function(){return{source:{type:"vector",tiles:[this.options.url]},"source-layer":this.options.sourceLayer}},e.prototype._updateFilter=function(t){var e=this,r=this.layer;r&&this._types.forEach(function(n){var o=c[n];if(o){var i=["==","$type",o],a=e._getLayerNameFromType(n),s=e._getSelectionLayerNameFromType(n);if(-1!==r.indexOf(s)&&e._selectionName){var u=t?e._createFilterDefinitions(t,A):[];e.map.setFilter(s,["all",i].concat(u))}if(-1!==r.indexOf(a)){u=t?e._createFilterDefinitions(t,P):[];e.map.setFilter(a,["all",i].concat(u))}}})},e.prototype._createFilterDefinitions=function(t,e){return t.map(function(t){var r=t[0],n=t[1],o=t[2],i=e[n];return"in"===n||"notin"===n?[i,r].concat(o):[i,r,o]})},e}(L),x=r(25),I=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S=function(){return(S=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I(e,t),e.prototype.addLayer=function(t){var e={type:"raster",tiles:(t=S({},this.options,t||{}))&&t.subdomains?t.subdomains.split("").map(function(e){return t.url.replace("{s}",e)}):[t.url],tileSize:256};return t.attribution&&(e.attribution=t.attribution),this.map.addLayer({id:this._layerId,type:"raster",layout:{visibility:"none"},source:e},t.before),this.layer=[this._layerId]},e}(a),M=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T={url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright" target="_blank">OpenStreetMap</a> contributors',subdomains:"abc"},j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),e.prototype.addLayer=function(e){return t.prototype.addLayer.call(this,Object.assign({},T,e))},e}(F),D=r(24),N=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(){return(B=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},R=function(t){function e(e){void 0===e&&(e={});return e=B({},e,{showCompass:!1}),t.call(this,e)||this}return N(e,t),e.prototype._createButton=function(e,r,n){var o=t.prototype._createButton.call(this,e,r,n),i={"Zoom in":"zoomInTitle","Zoom out":"zoomOutTitle"}[r],a=i&&this.options[i];return a&&(o.title=a,o.setAttribute("aria-label",a)),o},e}(x.NavigationControl),G=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),z=function(t){function e(e){void 0===e&&(e={});return e=Object.assign({},e,{showZoom:!1}),t.call(this,e)||this}return G(e,t),e}(x.NavigationControl),Z=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Z(e,t),e}(x.AttributionControl),Q=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},J=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},V=0,U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.featureIdName="_rendromId",e._features=[],e._filteredFeatureIds=[],e}return Q(e,t),e.prototype.addLayer=function(e){return H(this,void 0,Promise,function(){var r;return J(this,function(n){switch(n.label){case 0:return[4,t.prototype.addLayer.call(this,e)];case 1:return r=n.sent(),this.options.data&&this.addData(this.options.data),[2,r]}})})},e.prototype.removeLayer=function(){t.prototype.removeLayer.call(this),this.map.removeSource(this._sourceId)},e.prototype.clearLayer=function(t){var e=[],r=this.map.getSource(this._sourceId);t&&(e=this._features=this._features.filter(function(e){return!t(e)})),r.setData({type:"FeatureCollection",features:e})},e.prototype.addData=function(t){return H(this,void 0,void 0,function(){var e,r,n=this;return J(this,function(o){switch(o.label){case 0:return this.options.type&&(e=this.options.type),!e&&t&&(r=function(t){var e;if("FeatureCollection"===t.type)e=y(t.features.map(function(t){return t.geometry.type}));else if("GeometryCollection"===t.type){e=y(t.geometries.map(function(t){return t.type}))}else e="Feature"===t.type?t.geometry.type:t.type;return e}(t),e=u[r]),t&&e?(this.filterGeometries(t,e).forEach(function(t){var e="_"+V++;t._rendromId=e,t.properties&&(t.properties[n.featureIdName]=e)}),this._filterFun&&this._filter(this._filterFun),[4,this._updateLayerPaint(e)]):[3,2];case 1:o.sent(),this.map.getSource(this._sourceId).setData({type:"FeatureCollection",features:this._features}),o.label=2;case 2:return[2]}})})},e.prototype.getLayers=function(){var t=this,e=this._filteredFeatureIds.length;return this._features.map(function(r){var n=!1;if(e){var o=t._getRendromId(r);void 0!==o&&(n=-1!==t._filteredFeatureIds.indexOf(o))}return{feature:r,visible:n}})},e.prototype.filter=function(t){this._filterFun=t,this._filter(t)},e.prototype.removeFilter=function(){this._filterFun=void 0,this._filteredFeatureIds=[],this._updateFilter()},e.prototype.getSelected=function(){var t=this,e=[];return this._features.forEach(function(r){var n=t._getRendromId(r);n&&-1!==t._selectedFeatureIds.indexOf(n)&&e.push({feature:r})}),e},e.prototype.select=function(t){if(t){var e=this._features.filter(function(e){return t({feature:e})});this._selectFeature(e)}else this.selected||this._selectFeature(this._features);this.selected=!0},e.prototype.unselect=function(t){if(t){var e=this._features.filter(function(e){return t({feature:e})});this._unselectFeature(e)}else this.selected&&this._unselectFeature(this._features);this.selected=!!this._selectedFeatureIds.length},e.prototype._onAddLayer=function(t){this.map.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}})},e.prototype._getRendromId=function(t){var e=t._rendromId;return void 0!==e?e:t.properties&&void 0!==t.properties._rendromId?t.properties._rendromId:void 0},e.prototype._createPaintForType=function(e,r,n){return H(this,void 0,Promise,function(){return J(this,function(o){switch(o.label){case 0:return"function"!=typeof e?[3,2]:[4,this._getPaintFromCallback(e,r,n)];case 1:return[2,o.sent()];case 2:return[2,t.prototype._createPaintForType.call(this,e,r,n)]}})})},e.prototype._selectFeature=function(t){var e=this;this.options&&!this.options.multiselect&&(this._selectedFeatureIds=[]);(Array.isArray(t)?t:[t]).forEach(function(t){var r=e._getRendromId(t);void 0!==r&&e._selectedFeatureIds.push(r)}),this._updateFilter()},e.prototype._unselectFeature=function(t){var e=this;(Array.isArray(t)?t:[t]).forEach(function(t){var r=e._getRendromId(t);if(void 0!==r){var n=e._selectedFeatureIds.indexOf(r);-1!==n&&e._selectedFeatureIds.splice(n,1)}}),this._updateFilter()},e.prototype._filter=function(t){var e=this;this._filteredFeatureIds=[],this._features.forEach(function(r){var n=t({feature:r}),o=e._getRendromId(r);n&&o&&e._filteredFeatureIds.push(o)}),this._updateFilter()},e.prototype.filterGeometries=function(t,e){var r=[];if("FeatureCollection"===t.type)r=t.features=t.features.filter(function(t){return d(t.geometry.type,e)});else if("Feature"===t.type){if(!d(t.geometry.type,e))return[];r.push(t)}else if("GeometryCollection"===t.type){var n=t;n.geometries=n.geometries.filter(function(t){return d(t.type,e)}),r=n.geometries.map(function(t){return{type:"Feature",geometry:t,properties:{}}})}else if(u[t.type]){r=[{type:"Feature",geometry:t,properties:{}}]}return this._features=this._features.concat(r),r},e.prototype._getPaintFromCallback=function(t,e,r){return H(this,void 0,void 0,function(){var n,o,i,a,s,u,c;return J(this,function(p){switch(p.label){case 0:n={},o=0,i=this._features,p.label=1;case 1:return o<i.length?(a=i[o],"icon"!==(s=t(a)).type?[3,3]:[4,this._registerImage(s)]):[3,5];case 2:return p.sent(),a.properties&&(a.properties["_icon-image-"+r]=s.html),n["icon-image"]="{_icon-image-"+r+"}",[3,4];case 3:for(u in s)c=s[u],a.properties&&(a.properties["_paint_"+u+"_"+r]=c),n[u]=["get","_paint_"+u+"_"+r];p.label=4;case 4:return o++,[3,1];case 5:return"icon-image"in n?[2,n]:[2,this._createPaintForType(n,e,r)]}})})},e.prototype._updateFilter=function(){var t=this,e=[],r=[];this._filteredFeatureIds.length?this._features.forEach(function(n){var o=t._getRendromId(n);void 0!==o&&-1!==t._filteredFeatureIds.indexOf(o)&&(-1!==t._selectedFeatureIds.indexOf(o)?e.push(o):r.push(o))}):e=this._selectedFeatureIds;var n=this.layer;n&&this._types.forEach(function(o){var i=c[o];if(i){var a=["==","$type",i],s=t._getLayerNameFromType(o),u=t._getSelectionLayerNameFromType(o);-1!==n.indexOf(u)&&t._selectionName&&t.map.setFilter(u,["all",a,["in",t.featureIdName].concat(e)]),-1!==n.indexOf(s)&&(t._filteredFeatureIds.length?t.map.setFilter(s,["all",a,["in",t.featureIdName].concat(r)]):t.map.setFilter(s,["all",a,["!in",t.featureIdName].concat(e)]))}})},e}(L);function $(t,e){return void 0===e&&(e={}),new(function(){function r(){}return r.prototype.getDefaultPosition=function(){return"top-left"},r.prototype.onAdd=function(){var r=document.createElement("div"),n=t.onAdd();return r.classList.add("mapboxgl-ctrl"),e.bar&&r.classList.add("mapboxgl-bar"),e.addClass&&r.classList.add(e.addClass),r.appendChild(n),this._container=r,this._container},r.prototype.onRemove=function(){if(this._container){var e=this._container.parentNode;e&&e.removeChild(this._container)}return t.onRemove()},r.prototype.remove=function(){this.onRemove()},r}())}var K=function(){return(K=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},X={padding:100},Y=function(){function t(){this.options={},this.emitter=new D.EventEmitter,this.layerAdapters=t.layerAdapters,this.controlAdapters=t.controlAdapters,this.isLoaded=!1,this._universalEvents=["zoomstart","zoom","zoomend","movestart","move","moveend"],this._sourceDataLoading={}}return t.prototype.create=function(t){var e=this;if(!this.map&&(this.options=t,t.target)){var r={container:t.target,attributionControl:!1,bounds:t.bounds,fitBoundsOptions:K({},t.fitOptions,X),style:{version:8,name:"Empty style",sources:{},layers:[]}};void 0!==t.center&&(r.center=t.center),t.zoom&&(r.zoom=t.zoom),this.map=new x.Map(r),this._addEventsListeners(),this.map.once("load",function(){e.isLoaded=!0,e.emitter.emit("create",e)})}},t.prototype.destroy=function(){this.map&&this.map.remove()},t.prototype.getContainer=function(){return this.map&&this.map.getContainer()},t.prototype.setView=function(t,e){this.map&&this.map.jumpTo({center:t,zoom:e-1})},t.prototype.setCenter=function(t){this.map&&this.map.setCenter(t)},t.prototype.getCenter=function(){if(this.map){var t=this.map.getCenter();return[t.lng,t.lat]}},t.prototype.setZoom=function(t){this.map&&this.map.setZoom(t-1)},t.prototype.getZoom=function(){if(this.map)return this.map.getZoom()+1},t.prototype.fit=function(t,e){void 0===e&&(e={}),this.map&&this.map.fitBounds([[t[0],t[1]],[t[2],t[3]]],K({linear:!0},e,X))},t.prototype.setRotation=function(t){},t.prototype.showLayer=function(t){var e=this;t.forEach(function(t){e._toggleLayer(t,!0)})},t.prototype.hideLayer=function(t){var e=this;t.forEach(function(t){e._toggleLayer(t,!1)})},t.prototype.removeLayer=function(t){if(this.map){var e=this.map;t.forEach(function(t){e.removeLayer(t),e.getSource(t)&&e.removeSource(t)})}},t.prototype.setLayerOrder=function(t,e,r){var n=this;this._sortTimerId&&window.clearTimeout(this._sortTimerId),this._sortTimerId=window.setTimeout(function(){return n._setLayerOrder(r)})},t.prototype.setLayerOpacity=function(t,e){var r=this,n=this.map;n&&t.forEach(function(t){r._onMapLoad().then(function(){var r=n.getLayer(t);r&&n.setPaintProperty(t,r.type+"-opacity",e)})})},t.prototype.createControl=function(t){return $(t)},t.prototype.createButtonControl=function(t){return function(t){var e=document.createElement("button");if(e.className="mapboxgl-ctrl-icon",e.setAttribute("role","button"),t.title&&(e.title=t.title,e.setAttribute("aria-label",t.title)),t.html){t.html instanceof HTMLElement?e.appendChild(t.html):e.innerHTML=t.html;var r=e.firstElementChild;r&&(r.style.width="100%",r.style.height="100%",r.style.lineHeight=(e.offsetHeight||30)+"px")}t.addClass&&t.addClass.split(" ").forEach(function(t){return e.classList.add(t)});var n=function(e){e.stopPropagation(),t.onClick()};return t.onClick&&e.addEventListener("click",n),$({onAdd:function(){return e},onRemove:function(){var r=e.parentNode;r&&r.removeChild(e),t.onClick&&e.removeEventListener("click",n)}},{bar:!0,addClass:"mapboxgl-ctrl-group"})}(t)},t.prototype.addControl=function(t,e){if(this.map)return this.map.addControl(t,e),t},t.prototype.removeControl=function(t){this.map&&this.map.removeControl(t)},t.prototype.onMapClick=function(t){var e=t.lngLat,r=t.point,n=r.x,o=r.y;this.emitter.emit("click",{latLng:e,pixel:{top:o,left:n}})},t.prototype._onMapLoad=function(t){var e=this;return new Promise(function(r){var n=function(){t&&t(),e.map&&r(e.map)};e.isLoaded?n():e.map&&e.emitter.once("create",function(){n()})})},t.prototype._setLayerOrder=function(t){var e=this.map;if(e){var r=[],n=[];for(var o in t){var i=t[o];i.options.baseLayer?r.push(i):n.push(i)}n=n.sort(function(t,e){return void 0!==t.options.order&&void 0!==e.options.order?t.options.order-e.options.order:0});for(var a=function(t){var r=n[t+1],o=r&&r.layer&&r.layer[0],i=n[t];s._getLayerIds(i).forEach(function(t){e.moveLayer(t,o)})},s=this,u=0;u<n.length;u++)a(u);var c=n.find(function(t){return Array.isArray(t.layer)});if(c){var p=this._getLayerIds(c)[0];r.forEach(function(t){t.layer&&t.layer.forEach(function(t){e.moveLayer(t,p)})})}}},t.prototype._getLayerIds=function(t){var e=[];if(t)if(Array.isArray(t.layer))e=t.layer;else if(t.getDependLayers){t.getDependLayers().forEach(function(t){(t.layer&&t.layer.layer||t).forEach(function(t){e.push(t)})})}return e},t.prototype._toggleLayer=function(t,e){this._onMapLoad().then(function(r){r.setLayoutProperty(t,"visibility",e?"visible":"none")})},t.prototype._onMapSourceData=function(t){var e=this;if("source"===t.dataType){var r=t.isSourceLoaded;this._onDataLoad(t,r,function(t){e.emitter.emit("data-loaded",{target:t})})}},t.prototype._onMapError=function(t){var e=this;if(this._sourceDataLoading[t.sourceId]){var r=t.isSourceLoaded;this._onDataLoad(t,r,function(t){e.emitter.emit("data-error",{target:t})})}},t.prototype._onDataLoad=function(t,e,r){if(void 0===e&&(e=!1),e)Object.keys(this._sourceDataLoading).forEach(function(t){r(t)}),this._sourceDataLoading={};else{var n=this._sourceDataLoading[t.sourceId];if(n&&t.tile){var o=n.indexOf(t.tile);-1!==o&&this._sourceDataLoading[t.sourceId].splice(o,1),n.length||(r(t.sourceId),delete this._sourceDataLoading[t.sourceId])}}},t.prototype._addEventsListeners=function(){var t=this,e=this.map;e&&(e.on("sourcedataloading",function(e){t._sourceDataLoading[e.sourceId]=t._sourceDataLoading[e.sourceId]||[],e.tile&&t._sourceDataLoading[e.sourceId].push(e.tile)}),e.on("sourcedata",this._onMapSourceData.bind(this)),e.on("error",this._onMapError.bind(this)),e.on("click",function(e){t.onMapClick(e)}),this._universalEvents.forEach(function(r){e.on(r,function(){return t.emitter.emit(r,t)})}))},t.layerAdapters={TILE:F,MVT:E,OSM:j,GEOJSON:U},t.controlAdapters={ZOOM:R,COMPASS:z,ATTRIBUTION:q},t}();e.a=Y},34:function(t){t.exports=JSON.parse('{"baseUrl":"https://gis.runivers.ru","sourceGroupId":5344,"pointsGroupId":6541,"lineColor":[[1,"#33b850"],[2,"#79d254"],[3,"#01d0a4"],[4,"#01d0a4"],[5,"#01d0a4"],[6,"#33b850"],[7,"#a3ada3"],[null,"#ccc"]],"lineColorLegend":[[1,"#33b850","Территория России, новые территории",[1,6]],[2,"#79d254","Территория под протекторатом, в вассальной зависимости или в сфере влияния",[2]],[3,"#01d0a4","Аренда, совместное владение, спорная территория",[3,4,5]],[4,"#a3ada3","Утраченная территория",[7]]],"statusAliases":{"1":"Территория России","2":"Зависимые территории","3":"Аренда","4":"Совместное владение","5":"Спорная территория","6":"Новая территория","7":"Утраченная территория"}}')},441:function(t,e){},448:function(t,e,r){t.exports=r(202)},47:function(t,e,r){"use strict";r.d(e,"a",function(){return o});var n=function(t,e,r,n){try{t(r(n))}catch(t){e(t)}},o=function(){function t(t,e){this.onCancel=e,this._canceled=!1,this._promise=new Promise(t)}return t.prototype.then=function(e,r){var o=this,i=new t(function(t,a){o._promise&&o._promise.then(function(r){o._canceled&&i.cancel(),e&&!o._canceled?n(t,a,e,r):t(r)},function(e){o._canceled&&i.cancel(),r&&!o._canceled?n(t,a,r,e):a(e)})},function(){o.cancel()});return i},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.cancel=function(t){return this._canceled=!0,t&&this._promise&&this._promise.catch(t),this.onCancel&&this.onCancel(),this._destroy(),this},t.prototype.finally=function(t){return this._promise?this._promise.finally(t):Promise.reject(t)},t.prototype._destroy=function(){this.onCancel=void 0,this._promise=void 0},t}()},70:function(t,e,r){"use strict";var n=r(75);function o(t,e){var r=document.createElement("div"),n=!1;e.getStatus?n=e.getStatus():e.status&&(n=e.status);var o=e.title||"",i=e.html;function a(){o&&(r.title="string"==typeof o?o:n?o.on:o.off,r.setAttribute("aria-label",r.title))}function s(t){t instanceof HTMLElement?(r.innerHTML="",r.appendChild(t)):"string"==typeof t&&(r.innerHTML=t)}function u(){i&&("string"==typeof i||i instanceof HTMLElement?s(i):s(n?i.on:i.off),r.setAttribute("aria-label",r.title))}function c(t,e){t.split(" ").forEach(function(t){e?r.classList.add(t):r.classList.remove(t)})}function p(){e.addClassOn&&c(e.addClassOn,n),e.addClassOff&&c(e.addClassOff,!n)}a(),u(),e.addClass&&c(e.addClass,!0),p();var l=function(t){n=void 0!==t?t:!n,u(),a(),p(),e.onClick&&e.onClick(n)},f=t({html:r,onClick:l});return f.onClick=l,f}var i=function(){this.backspace=8,this.tab=9,this.enter=13,this.shift=16,this.ctrl=17,this.alt=18,this["pause/break"]=19,this.caps_lock=20,this.escape=27,this.page_up=33,this.page_down=34,this.end=35,this.home=36,this.left_arrow=37,this.up_arrow=38,this.right_arrow=39,this.down_arrow=40,this.insert=45,this.delete=46,this.left_window_key=91,this.right_window_key=92,this.select_key=93,this.numpad_0=96,this.numpad_1=97,this.numpad_2=98,this.numpad_3=99,this.numpad_4=100,this.numpad_5=101,this.numpad_6=102,this.numpad_7=103,this.numpad_8=104,this.numpad_9=105,this.multiply=106,this.add=107,this.subtract=109,this.decimal_point=110,this.divide=111,this.f1=112,this.f2=113,this.f3=114,this.f4=115,this.f5=116,this.f6=117,this.f7=118,this.f8=119,this.f9=120,this.f10=121,this.f11=122,this.f12=123,this.num_lock=144,this.scroll_lock=145,this["semi-colon"]=186,this.equal_sign=187,this[","]=188,this["-"]=189,this["."]=190,this["/"]=191,this["`"]=192,this["["]=219,this["\\"]=220,this["]"]=221,this["'"]=222},a=function(){function t(){this.keyCodeAlias=new i,this.keys={},this._windowOnFocus=this.windowOnFocus.bind(this),this._keysPressed=this.keysPressed.bind(this),this._keysReleased=this.keysReleased.bind(this),this.addKeyboardEventsListener()}return t.prototype.pressed=function(t){var e=this.keyCodeAlias[t];return!!e&&this.keys[e]},t.prototype.addKeyboardEventsListener=function(){window.addEventListener("focus",this._windowOnFocus,!1),window.addEventListener("keydown",this._keysPressed,!1),window.addEventListener("keyup",this._keysReleased,!1)},t.prototype.removeKeyboardEventsListener=function(){window.removeEventListener("focus",this._windowOnFocus,!1),window.removeEventListener("keydown",this._keysPressed,!1),window.removeEventListener("keyup",this._keysReleased,!1)},t.prototype.keysPressed=function(t){t.stopPropagation(),this.keys[t.keyCode]||(this.keys[t.keyCode]=!0)},t.prototype.keysReleased=function(t){t.stopPropagation(),this.keys[t.keyCode]=!1},t.prototype.windowOnFocus=function(){this.keys={}},t}(),s=r(24);function u(t){return function(e,r,n){var o=n.value;return n.value=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise(function(n,i){var a=function(){var t=o.apply(e,r);t&&t.then?t.then(n).catch(i):n(t)};e.getEventStatus(t)?a():e.emitter.once(t,function(){a()})})},n}}var c=r(94);var p=r(71),l=r(95),f=r(93),h=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},y=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=function(){function t(t){this.webMap=t}return t.prototype.addControl=function(t,e,r){return h(this,void 0,void 0,function(){var n,o;return y(this,function(i){switch(i.label){case 0:return(n="string"==typeof t?this.getControl(t,r):t)?[4,n]:[3,2];case 1:return o=i.sent(),[2,this.webMap.mapAdapter.addControl(o,e)];case 2:return[2]}})})},t.prototype.createControl=function(t,e){return h(this,void 0,Promise,function(){return y(this,function(r){switch(r.label){case 0:return[4,this.webMap.onLoad("build-map")];case 1:return r.sent(),this.webMap.mapAdapter.createControl?[2,this.webMap.mapAdapter.createControl(t,e)]:[2]}})})},t.prototype.createButtonControl=function(t){return h(this,void 0,Promise,function(){return y(this,function(e){switch(e.label){case 0:return[4,this.webMap.onLoad("build-map")];case 1:return e.sent(),this.webMap.mapAdapter.createButtonControl?[2,this.webMap.mapAdapter.createButtonControl(t)]:[2]}})})},t.prototype.createToggleControl=function(t){return h(this,void 0,Promise,function(){return y(this,function(e){switch(e.label){case 0:return[4,this.webMap.onLoad("build-map")];case 1:return e.sent(),this.webMap.mapAdapter.createToggleControl?[2,this.webMap.mapAdapter.createToggleControl(t)]:this.webMap.mapAdapter.createButtonControl?[2,b.utils.createToggleControl(this.webMap.mapAdapter.createButtonControl,t)]:[2]}})})},t.prototype.removeControl=function(t){t.remove?t.remove():this.webMap.mapAdapter.removeControl&&this.webMap.mapAdapter.removeControl(t)},t.prototype.getControl=function(e,r){var n=this.webMap.mapAdapter.controlAdapters[e];if(n)return new n(r);var o=t.controls[e];return o?o(this.webMap,r):void 0},t.controls={CONTROL:function(t,e){return t.createControl(e.control,e.options)},BUTTON:function(t,e){return t.createButtonControl(e)},TOGGLE:function(t,e){return t.createToggleControl(e)}},t}();r.d(e,"a",function(){return b});var v=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},m=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}},_={minZoom:0,maxZoom:21,paint:{color:"blue",opacity:1,radius:8,weight:1},selectedPaint:{color:"darkblue",opacity:1,radius:12,weight:1}},b=function(){function t(e){this.options=_,this.emitter=new s.EventEmitter,this.keys=t.keys,this.runtimeParams=[],this.getPaintFunctions=t.getPaintFunctions,this.LAYERS=f.a,this._eventsStatus={},this.layers=new this.LAYERS(this),this.controls=new d(this),this.mapAdapter=e.mapAdapter,this._starterKits=e.starterKits||[],e.mapOptions&&(this.options=Object(n.a)(_||{},e.mapOptions)),this._addEventsListeners(),e.create&&this.create(this.options)}return t.prototype.create=function(t){return v(this,void 0,Promise,function(){return m(this,function(e){switch(e.label){case 0:return this.getEventStatus("create")?[3,2]:(this.options=Object(n.a)(_||{},t),[4,this._setupMap()]);case 1:e.sent(),this._emitStatusEvent("create",this),e.label=2;case 2:return[2,this]}})})},t.prototype.destroy=function(){!function(t){for(var e in t)delete t[e]}(this._emitStatusEvent),this.mapAdapter.destroy&&this.mapAdapter.destroy()},t.prototype.getContainer=function(){if(this.mapAdapter.getContainer)return this.mapAdapter.getContainer();if(this.options.target){if(this.options.target instanceof HTMLElement)return this.options.target;if("string"==typeof this.options.target){var t=document.getElementById(this.options.target);if(t)return t}}},t.prototype.setCursor=function(t){this.mapAdapter.setCursor&&this.mapAdapter.setCursor(t)},t.prototype.setCenter=function(t){return this.mapAdapter.setCenter(t),this},t.prototype.getCenter=function(){return this.mapAdapter.getCenter()},t.prototype.setZoom=function(t){return this.mapAdapter.setZoom(t),this},t.prototype.getZoom=function(){return this.mapAdapter.getZoom()},t.prototype.setView=function(t,e){this.mapAdapter.setView&&t&&e?this.mapAdapter.setView(t,e):(t&&this.mapAdapter.setCenter(t),e&&this.mapAdapter.setZoom(e))},t.prototype.fitBounds=function(t,e){return this.mapAdapter.fit(t,e),this},t.prototype.getEventStatus=function(t){var e=t,r=this._eventsStatus[e];return void 0!==r&&r},t.prototype.onLoad=function(t){var e=this;return void 0===t&&(t="create"),new Promise(function(r){e.getEventStatus(t)?r(e):e.emitter.once(t,function(){r(e)})})},t.prototype.onMapLoad=function(t){var e=this;return new Promise(function(r){var n=function(){var n=e.mapAdapter;t&&t(n),n&&r(n)},o=void 0===e.mapAdapter.isLoaded||e.mapAdapter.isLoaded;e.mapAdapter.map&&o?n():e.mapAdapter.emitter.once("create",function(){n()})})},t.prototype.fitLayer=function(t){return v(this,void 0,void 0,function(){return m(this,function(e){return[2,this.layers.fitLayer(t)]})})},t.prototype.isBaseLayer=function(t){return this.layers.isBaseLayer(t)},t.prototype.getActiveBaseLayer=function(){var t=this,e=this.getBaseLayers().find(function(e){return t.isLayerVisible(e)});if(e)return this.getLayer(e)},t.prototype.getBaseLayers=function(){return this.layers.getBaseLayers()},t.prototype.getLayerAdapters=function(){return this.mapAdapter.layerAdapters},t.prototype.getLayerAdapter=function(t){return this.mapAdapter.layerAdapters[t]},t.prototype.getLayer=function(t){return this.layers.getLayer(t)},t.prototype.getLayerId=function(t){return this.layers.getLayerId(t)},t.prototype.getLayers=function(){return this.layers.getLayers()},t.prototype.findLayer=function(t){return this.layers.findLayer(t)},t.prototype.isLayerVisible=function(t){return this.layers.isLayerVisible(t)},t.prototype.addBaseLayer=function(t,e){return v(this,void 0,Promise,function(){return m(this,function(r){return[2,this.layers.addBaseLayer(t,e)]})})},t.prototype.addLayer=function(t,e,r){return v(this,void 0,Promise,function(){return m(this,function(n){return[2,this.layers.addLayer(t,e,r)]})})},t.prototype.addLayerFromAsyncAdapter=function(t,e,r){return v(this,void 0,Promise,function(){return m(this,function(n){return[2,this.layers.addLayerFromAsyncAdapter(t,e,r)]})})},t.prototype.removeLayers=function(t){this.layers.removeLayers(t)},t.prototype.removeOverlays=function(){this.layers.removeOverlays()},t.prototype.removeLayer=function(t){this.layers.removeLayer(t)},t.prototype.addGeoJsonLayer=function(t,e){return v(this,void 0,void 0,function(){return m(this,function(r){return[2,this.layers.addGeoJsonLayer(t,e)]})})},t.prototype.showLayer=function(t){return this.layers.showLayer(t)},t.prototype.hideLayer=function(t){this.layers.hideLayer(t)},t.prototype.toggleLayer=function(t,e){this.layers.toggleLayer(t,e)},t.prototype.updateLayer=function(t){this.layers.updateLayer(t)},t.prototype.setLayerOpacity=function(t,e){this.layers.setLayerOpacity(t,e)},t.prototype.selectLayer=function(t,e){this.layers.selectLayer(t,e)},t.prototype.unSelectLayer=function(t,e){this.layers.unSelectLayer(t,e)},t.prototype.filterLayer=function(t,e){return this.layers.filterLayer(t,e)},t.prototype.propertiesFilter=function(t,e,r){this.layers.propertiesFilter(t,e,r)},t.prototype.removeLayerFilter=function(t){this.layers.removeLayerFilter(t)},t.prototype.setLayerData=function(t,e){this.layers.setLayerData(t,e)},t.prototype.addLayerData=function(t,e){this.layers.addLayerData(t,e)},t.prototype.clearLayerData=function(t,e){this.layers.clearLayerData(t,e)},t.prototype.getAttributions=function(t){return this.layers.getAttributions(t)},t.prototype.createControl=function(t,e){return v(this,void 0,Promise,function(){return m(this,function(r){return[2,this.controls.createControl(t,e)]})})},t.prototype.createButtonControl=function(t){return v(this,void 0,Promise,function(){return m(this,function(e){return[2,this.controls.createButtonControl(t)]})})},t.prototype.createToggleControl=function(t){return v(this,void 0,Promise,function(){return m(this,function(e){return[2,this.controls.createToggleControl(t)]})})},t.prototype.removeControl=function(t){this.controls.removeControl(t)},t.prototype.getControl=function(t,e){return this.controls.getControl(t,e)},t.prototype.addControl=function(t,e,r){return v(this,void 0,void 0,function(){return m(this,function(n){return[2,this.controls.addControl(t,e,r)]})})},t.prototype._emitStatusEvent=function(t,e){var r=t;this._eventsStatus[r]=!0,this.emitter.emit(r,e)},t.prototype._setupMap=function(){return v(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.mapAdapter.create(this.options)];case 1:return t.sent(),this._zoomToInitialExtent(),[4,this._addLayerProviders()];case 2:return t.sent(),[4,this._onLoadSync()];case 3:return t.sent(),this._emitStatusEvent("build-map",this.mapAdapter),[2,this]}})})},t.prototype._zoomToInitialExtent=function(){if(this._extent)this.mapAdapter.fit(this._extent);else if(this.options.bounds)this.fitBounds(this.options.bounds);else{var t=this.options,e=t.center,r=t.zoom;this.setView(e,r)}},t.prototype._addLayerProviders=function(){var t,e,r,n;return v(this,void 0,Promise,function(){var o,i,a,s,u,c,p,l,f,h,y;return m(this,function(d){switch(d.label){case 0:d.trys.push([0,26,,27]),d.label=1;case 1:d.trys.push([1,19,20,25]),o=g(this._starterKits),d.label=2;case 2:return[4,o.next()];case 3:return(i=d.sent()).done?[3,18]:(a=i.value).getLayerAdapters?[4,a.getLayerAdapters.call(a)]:[3,17];case 4:if(!(s=d.sent()))return[3,17];d.label=5;case 5:d.trys.push([5,11,12,17]),u=g(s),d.label=6;case 6:return[4,u.next()];case 7:return(c=d.sent()).done?[3,10]:[4,(p=c.value).createAdapter(this)];case 8:(l=d.sent())&&(this.mapAdapter.layerAdapters[p.name]=l),d.label=9;case 9:return[3,6];case 10:return[3,17];case 11:return f=d.sent(),r={error:f},[3,17];case 12:return d.trys.push([12,,15,16]),c&&!c.done&&(n=u.return)?[4,n.call(u)]:[3,14];case 13:d.sent(),d.label=14;case 14:return[3,16];case 15:if(r)throw r.error;return[7];case 16:return[7];case 17:return[3,2];case 18:return[3,25];case 19:return h=d.sent(),t={error:h},[3,25];case 20:return d.trys.push([20,,23,24]),i&&!i.done&&(e=o.return)?[4,e.call(o)]:[3,22];case 21:d.sent(),d.label=22;case 22:return[3,24];case 23:if(t)throw t.error;return[7];case 24:return[7];case 25:return[3,27];case 26:throw y=d.sent(),new Error(y);case 27:return[2]}})})},t.prototype._onLoadSync=function(){var t,e;return v(this,void 0,Promise,function(){var r,n,o,i,a;return m(this,function(s){switch(s.label){case 0:s.trys.push([0,8,9,14]),r=g(this._starterKits),s.label=1;case 1:return[4,r.next()];case 2:if((n=s.sent()).done)return[3,7];if(!(o=n.value).onLoadSync)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,o.onLoadSync.call(o,this)];case 4:return s.sent(),[3,6];case 5:return i=s.sent(),console.error(i),[3,6];case 6:return[3,1];case 7:return[3,14];case 8:return a=s.sent(),t={error:a},[3,14];case 9:return s.trys.push([9,,12,13]),n&&!n.done&&(e=r.return)?[4,e.call(r)]:[3,11];case 10:s.sent(),s.label=11;case 11:return[3,13];case 12:if(t)throw t.error;return[7];case 13:return[7];case 14:return[2]}})})},t.prototype._addEventsListeners=function(){var t=this;["click","zoomstart","zoom","zoomend","movestart","move","moveend"].forEach(function(e){t.mapAdapter.emitter.on(e,function(r){t.emitter.emit(e,r)})}),this.onMapLoad().then(function(){})},t.keys=new a,t.utils={detectGeometryType:p.a,findMostFrequentGeomType:p.b,updateGeoJsonAdapterOptions:l.a,propertiesFilter:c.a,createToggleControl:o},t.decorators={onLoad:u},t.controls=d.controls,t}()},71:function(t,e,r){"use strict";function n(t){for(var e,r={},n=0;n<t.length;n++)r[t[n]]=1+(r[t[n]]||0);for(var o in r){var i=void 0!==e?r[e]:0;r[o]>(i||0)&&(e=o)}return e}function o(t){var e;if("FeatureCollection"===t.type)e=n(t.features.map(function(t){return t.geometry.type}));else if("GeometryCollection"===t.type){e=n(t.geometries.map(function(t){return t.type}))}else e="Feature"===t.type?t.geometry.type:t.type;return e}r.d(e,"b",function(){return n}),r.d(e,"a",function(){return o})},74:function(t,e,r){"use strict";r(92);var n=r(189),o=(r(440),r(441),function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)}),i='\n  <a href="#">\n    <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z">\n      </path>\n      <path d="M0 0h24v24H0z" fill="none"></path>\n    </svg>\n  </a>\n',a=function(){function t(e){this.options={template:"\n      <p>This is dialog!</p>\n    ",closeBtn:!0,closeBtnTemplate:i},this._dialog=document.createElement("dialog"),t.dialogs.push(this),this._dialog.className="dialog-component",this.options=o({},this.options,e),this._parent=this.options.parent||document.body,this._isNativeDialog=!!this._dialog.showModal,this._isNativeDialog||(n.a.registerDialog(this._dialog),this._dialog.classList.add("polyfilled")),this.options.closeBtn&&(this._closeBtn=this._createCloseBtn()),this._content=document.createElement("div"),this._dialog.appendChild(this._content),this.updateContent(),this._parent&&this._parent.appendChild(this._dialog),this._addEventsListeners()}return t.prototype.getContainer=function(){return this._dialog},t.prototype.show=function(){this._dialog.showModal()},t.prototype.close=function(){this._dialog.close()},t.prototype.destroy=function(){this.close(),this._dialog.remove()},t.prototype.updateContent=function(t){!t&&this.options.template&&(t=this.options.template),t&&this._addContent(t,this._content)},t.prototype._createCloseBtn=function(){var t=this,e=this.options.closeBtnTemplate;if(e){var r=document.createElement("div");return r.className="dialog-component__close",this._dialog.appendChild(r),this._addContent(e,r),r.addEventListener("click",function(e){e.stopPropagation(),t.close()}),r}},t.prototype._addContent=function(t,e){"string"==typeof t?e.innerHTML=t:t instanceof HTMLElement&&(e.innerHTML="",e.appendChild(t))},t.prototype._addEventsListeners=function(){var t=this;this._closeBtn&&this._closeBtn.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.close()}),this.options.openers&&[].forEach.call(this.options.openers,function(e){e.onclick=function(e){e.preventDefault(),t.show()}}),this._dialog.addEventListener("close",function(){}),this._dialog.addEventListener("cancel",function(){})},t.dialogs=[],t.clean=function(){t.dialogs.forEach(function(t){return t.destroy()})},t}();e.a=a},75:function(t,e,r){"use strict";var n={};function o(t,e,r){var n=window.document.createElement(t);return void 0!==e&&(n.className=e),r&&r.appendChild(n),n}r.r(n),r.d(n,"create",function(){return o}),r.d(e,"b",function(){return i}),r.d(e,"a",function(){return a});function i(t){return t.replace(/([^:]\/)\/+/g,"$1")}function a(t,e,r){void 0===r&&(r=!1);var n=Array.isArray(e),o=n&&[]||{};return n?r?(t=t||[],o=o.concat(t),e.forEach(function(e,n){void 0===o[n]?o[n]=e:"object"==typeof e?o[n]=a(t[n],e,r):-1===t.indexOf(e)&&o.push(e)})):o=e:(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){o[e]=t[e]}),Object.keys(e).forEach(function(n){"object"==typeof e[n]&&e[n]&&"object"==typeof t[n]&&"object"==typeof e[n]?o[n]=a(t[n],e[n],r):o[n]=e[n]})),o}},92:function(t,e,r){"use strict";var n=r(70);r(93),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171);e.default=n.a},93:function(t,e,r){"use strict";var n=function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t,e,r){var i;if("function"==typeof t)return function(n){return o(t(n),e,r)};if("get-paint"===t.type){var a=function(t,e){if("function"==typeof t.from)return t.from(t.options);if("string"==typeof t.from&&e){var r=e[t.from];if(r)return r(t.options)}}(t,r);a&&(i=o(a,e,r))}else{if("icon"===t.type)return t;(i=n({},t)).fill=void 0===i.fill||i.fill,i.stroke=void 0!==i.stroke?i.stroke:!i.fill||!(!i.strokeColor&&!i.strokeOpacity)}if(i){if("function"==typeof i)return i;i=n({},e,i)}else i=n({},e);return"color"in i&&(i.strokeColor||(i.strokeColor=i.color),i.fillColor||(i.fillColor=i.color)),"opacity"in i&&(void 0===i.strokeOpacity&&(i.strokeOpacity=i.opacity),void 0===i.fillOpacity&&(i.fillOpacity=i.opacity)),i}var i=r(95),a=r(94);r.d(e,"a",function(){return p});var s=function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},c=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},p=function(){function t(t){this.webMap=t,this._layersIds=1,this._baseLayers=[],this._layers={},this._selectedLayers=[]}return t.prototype.fitLayer=function(t){return u(this,void 0,void 0,function(){var e,r;return c(this,function(n){switch(n.label){case 0:return(e=this.getLayer(t))&&e.getExtent?[4,e.getExtent()]:[3,2];case 1:(r=n.sent())&&this.webMap.fitBounds(r),n.label=2;case 2:return[2]}})})},t.prototype.isBaseLayer=function(t){var e=this.getLayer(t);if(e&&e.id)return-1!==this._baseLayers.indexOf(e.id)},t.prototype.getBaseLayers=function(){return this._baseLayers},t.prototype.getLayer=function(t){return"string"==typeof t?this._layers[t]:t},t.prototype.getLayerId=function(t){var e=this.getLayer(t);if(e&&e.options)return e.options.id;throw new Error("No id for layer")},t.prototype.getLayers=function(){return Object.keys(this._layers)},t.prototype.findLayer=function(t){for(var e in this._layers){var r=this._layers[e];if(t(r))return r}},t.prototype.isLayerVisible=function(t){var e=this.getLayer(t);return!(!e||void 0===e.options.visibility)&&e.options.visibility},t.prototype.addBaseLayer=function(t,e){return u(this,void 0,Promise,function(){return c(this,function(r){switch(r.label){case 0:return[4,this.addLayer(t,s({},e,{baseLayer:!0}))];case 1:return[2,r.sent()]}})})},t.prototype.addLayer=function(t,e,r){return u(this,void 0,Promise,function(){var n,o,i,a,u,p,l,f,h,y,d,v;return c(this,function(c){switch(c.label){case 0:return n=r||this._layersIds++,"string"!=typeof t?[3,1]:(o=this.webMap.getLayerAdapter(t),[3,4]);case 1:return"function"!=typeof t?[3,2]:(o=t,[3,4]);case 2:return t.then?[4,t]:[3,4];case 3:o=c.sent(),c.label=4;case 4:return void 0===o?[3,10]:(i=e,this._updateGeoJsonOptions(i),a=this.webMap.options,u=a.maxZoom,p=a.minZoom,e=s({id:String(n),order:n,maxZoom:u,minZoom:p},e),l=e.visibility,e.visibility=!1,e.baseLayer&&(e.order=0),(f=new o(this.webMap.mapAdapter.map,e)).options.baseLayer&&(e.baseLayer=!0,e.order=0),(h=f.options.id)&&(this._layers[h]=f),this.webMap.emitter.emit("layer:preadd",f),[4,this.webMap.onMapLoad()]);case 5:return c.sent(),[4,f.addLayer(e)];case 6:return y=c.sent(),f.layer=y,f.id=f.options.id,(h=f.options.id)&&(i.filter&&this.filterLayer(f,i.filter),e.baseLayer&&this._baseLayers.push(h),this._layers[h]=f,l&&this.showLayer(h)),void 0!==(d=e.opacity)&&d<=1&&this.setLayerOpacity(f,d),e.fit&&f.getExtent?[4,f.getExtent()]:[3,9];case 7:return(v=c.sent())?[4,this.webMap.fitBounds(v)]:[3,9];case 8:c.sent(),c.label=9;case 9:return this.webMap.emitter.emit("layer:add",f),[2,f];case 10:return[2,Promise.reject("No adapter")]}})})},t.prototype.addLayerFromAsyncAdapter=function(t,e,r){return u(this,void 0,Promise,function(){var n,o;return c(this,function(i){switch(i.label){case 0:return n=r||this._layersIds++,[4,t()];case 1:return(o=i.sent())?[2,this.addLayer(o,e,n)]:[2,Promise.reject("No adapter")]}})})},t.prototype.removeLayers=function(t){for(var e in this._layers){var r=!0;t&&(r=t(e,this._layers[e])),r&&(this.webMap.removeLayer(e),delete this._layers[e])}},t.prototype.removeOverlays=function(){this.webMap.removeLayers(function(t,e){return!e.options.baseLayer})},t.prototype.removeLayer=function(t){var e=this.getLayer(t),r=e&&this.getLayerId(e);if(e&&r){if(this.webMap.emitter.emit("layer:preremove",e),e.beforeRemove&&e.beforeRemove(),e.beforeRemove&&e.beforeRemove(),e.removeLayer?e.removeLayer():this.webMap.mapAdapter.removeLayer(e.layer),e.options&&e.options.baseLayer){var n=this._baseLayers.indexOf(r);n&&this._baseLayers.splice(n,1)}delete this._layers[r],this.webMap.emitter.emit("layer:remove",e)}},t.prototype.addGeoJsonLayer=function(t,e){return u(this,void 0,void 0,function(){var r;return c(this,function(n){switch(n.label){case 0:return(t=t||{}).multiselect=void 0!==t.multiselect&&t.multiselect,t.unselectOnSecondClick=void 0===t.unselectOnSecondClick||t.unselectOnSecondClick,e||(t=Object(i.a)(t)),t.paint=t.paint||{},[4,this.addLayer(e||"GEOJSON",t)];case 1:return r=n.sent(),this.showLayer(r),[2,r]}})})},t.prototype.showLayer=function(t,e){void 0===e&&(e={}),this.toggleLayer(t,!0,e)},t.prototype.hideLayer=function(t,e){void 0===e&&(e={}),this.toggleLayer(t,!1,e)},t.prototype.toggleLayer=function(t,e,r){var n=this;void 0===r&&(r={});var o=this.getLayer(t),i=o&&o.options.visibility,a=void 0!==e?e:!i,s=void 0!==r.silent&&r.silent,u=function(t,e){e.options.visibility=a;var r=a?"layer:preshow":"layer:prehide",o=a?"layer:show":"layer:hide";if(s||n.webMap.emitter.emit(r,e),a&&t){var i=e.options.baseLayer?0:e.options.order;if(0===i&&n._baseLayers.length){var u=n._baseLayers.find(function(t){return t!==e.id&&n.isLayerVisible(t)});u&&n.hideLayer(u)}e.showLayer?e.showLayer.call(e,e.layer):n.webMap.mapAdapter.showLayer(e.layer),void 0!==i&&n.webMap.mapAdapter.setLayerOrder(e.layer,i,n._layers)}else e.hideLayer?e.hideLayer.call(e,e.layer):n.webMap.mapAdapter.hideLayer(e.layer);s||n.webMap.emitter.emit(o,e)};o&&o.options.visibility!==a&&(this.webMap.mapAdapter.map?u(this.webMap.mapAdapter,o):this.webMap.mapAdapter.emitter.once("create",function(t){u(t.map,o)}))},t.prototype.updateLayer=function(t){var e=this.getLayer(t);e&&this.isLayerVisible(e)&&(this.hideLayer(e,{silent:!0}),this.showLayer(e,{silent:!0}))},t.prototype.setLayerOpacity=function(t,e){var r=this.getLayer(t);r&&this.webMap.mapAdapter.setLayerOpacity&&r&&this.webMap.mapAdapter.setLayerOpacity(r.layer,e)},t.prototype.selectLayer=function(t,e){var r=this.getLayer(t);if(r){var n=r;n&&n.select&&n.select(e);var o=this.getLayerId(r);o&&this._selectedLayers.push(o)}},t.prototype.unSelectLayer=function(t,e){var r=this.getLayer(t);if(r){var n=r&&r;n.unselect&&n.unselect(e);var o=this.getLayerId(r);if(o){var i=this._selectedLayers.indexOf(o);-1!==i&&this._selectedLayers.splice(i,1)}}},t.prototype.filterLayer=function(t,e){var r=this.getLayer(t);return r.filter?r.filter(e):[]},t.prototype.propertiesFilter=function(t,e,r){var n=this.getLayer(t);n.propertiesFilter?n.propertiesFilter(e,r):n.filter&&this.filterLayer(n,function(t){return!t.feature||!t.feature.properties||Object(a.a)(t.feature.properties,e)})},t.prototype.removeLayerFilter=function(t){var e=this.getLayer(t);e.removeFilter?e.removeFilter():e.filter&&e.filter(function(){return!0})},t.prototype.setLayerData=function(t,e){var r=this.getLayer(t);r.setData?r.setData(e):r.clearLayer&&r.addData&&(r.clearLayer(),r.addData(e))},t.prototype.addLayerData=function(t,e){var r=this.getLayer(t);r.addData&&r.addData(e)},t.prototype.clearLayerData=function(t,e){var r=this.getLayer(t);r.clearLayer&&r.clearLayer(e)},t.prototype.getAttributions=function(t){var e=[];for(var r in this._layers){var n=this._layers[r];if(!(void 0===t.onlyVisible||t.onlyVisible)||n.options.visibility){var o=n.options&&n.options.attribution;o&&e.push(o)}}return e},t.prototype._onLayerClick=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){return this.webMap.emitter.emit("layer:click",t),[2,Promise.resolve(t)]})})},t.prototype._updateGeoJsonOptions=function(t){var e=this,r=t.onLayerClick;t.onLayerClick=function(t){return r&&r(t),e._onLayerClick(t)},t.nativePaint||(this.webMap.options.paint&&(t.paint=o(t.paint||{},this.webMap.options.paint,this.webMap.getPaintFunctions)),t.selectedPaint&&this.webMap.options.selectedPaint&&(t.selectedPaint=o(t.selectedPaint,this.webMap.options.selectedPaint,this.webMap.getPaintFunctions)))},t}()},94:function(t,e,r){"use strict";function n(t,e,r){var n=("^"+t+"$").replace(/%/g,".*").replace("_",".");return null!==new RegExp(n,r?"i":"").exec(e)}r.d(e,"a",function(){return i});var o={gt:function(t,e){return t>e},lt:function(t,e){return t<e},ge:function(t,e){return t>=e},le:function(t,e){return t<=e},eq:function(t,e){return t===e},ne:function(t,e){return t!==e},in:function(t,e){return-1!==e.indexOf(t)},notin:function(t,e){return-1===e.indexOf(t)},like:function(t,e){return n(t,e)},ilike:function(t,e){return n(t,e,!0)}};function i(t,e){return e.every(function(e){var r=e[0],n=e[1],i=e[2],a=o[n],s=t[r];return!a||!s||a(s,i)})}},95:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r(71),o={Point:"circle",LineString:"line",MultiPoint:"circle",Polygon:"fill",MultiLineString:"line",MultiPolygon:"fill"};function i(t){if(t.data){var e=o[Object(n.a)(t.data)],r=t.paint;"object"==typeof r&&(r.type=r.type?r.type:"fill"===e||"line"===e?"path":"html"in r||"className"in r?"icon":e),t.type=e}return t}}}]);